<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TALK</title>
    <link rel="stylesheet" href="talk.css" />
    <link rel="shortcut icon" href="../icons/talk.jfif" type="image/x-icon" />
  </head>
  <body>
    <style>
      .userPanel {
        position: fixed;
        height: 7vh;
        bottom: 1vh;
        left: 1vh;
        border: 1px solid black;
        display: flex;
        align-items: center;
        max-width: 70vh;
        width: auto;
        font-size: auto;
        background-color: gray;
        border-radius: 10px;
      }

      .userPanel .pfp {
        height: 100%;
      }

      .userPanel .userInfo {
        display: flex;
        flex-direction: column;

        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .userPanel .name {
        margin-left: 20px;
        margin-right: 50px;
        min-width: 50px;

        font-size: 3vh;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .userPanel .status {
        margin-left: 20px;
        margin-top: auto;
        font-size: 2vh;
        min-width: 1px;
        font-weight: 400;
        margin-top: -2vh;
        color: rgb(109, 170, 109);
      }

      .userPanel .settings {
        height: 80%;
        margin-left: auto;
        margin-right: 20px;
      }

      .userPanel .settings:hover {
        background-color: rgb(37, 37, 37);
      }

      @media (max-width: 400px) {
        .userPanel {
          width: 7vh;
        }
        .pfp {
          display: none;
        }
        #settingsIcon {
          display: none;
        }
        #hideIcon {
          margin: 5%;
        }
        .userInfo {
          display: none;
        }
      }

      /* USER SETTINGS */
      #userSettingsDiv {
        position: fixed;
        display: none;
        bottom: 10vh;
        left: 1vh;

        width: 40vh;
        height: 60%;

        background-color: rgba(128, 128, 128, 0.952);
        border: 0.3vh solid black;
        z-index: 123989321;

        border-radius: 10px;
      }

      #userSettingsDiv header {
        width: 40vh;
        height: 15vh;
      }
      #userSettingsDiv header img {
        width: 40vh;
        height: 15vh;
        border-radius: 15px;
      }

      #userSettingsDiv #pfpSettings {
        width: 40%;
        height: 20%;
        margin-top: 1vh;
        text-align: center;
        float: left;
      }

      #userSettingsDiv #pfpSettings img {
        max-width: 100%;
        max-height: 100%;
      }

      #userSettingsDiv #userNickname {
        background-color: rgba(192, 228, 172, 0.281);
        margin-top: 1vh;
        border-radius: 15px;
        width: 60%;
        font-size: auto;
        overflow: auto;
        height: 20%;
        float: left;
        margin-bottom: 3vh;
      }

      #userSettingsDiv #yourNickname {
        font-size: 4vh;
        margin-top: 2%;
        margin-bottom: 0;
        margin-left: 2%;
        word-wrap: break-word;
      }

      #userSettingsDiv #yourID {
        font-size: 2vh;
        margin-top: 0;
        margin-left: 2%;
        color: rgba(0, 0, 0, 0.425);
      }

      #userSettingsDiv #nicknameSettings {
        border: 0.1vh solid black;
        display: flex;
        width: 80%;
        height: 4vh;
        margin-top: 3vh;
        margin-left: 10%;
        margin-right: 10%;

        box-sizing: border-box;
        text-align: center;
        justify-content: center;
        padding-top: 2%;
      }

      #nicknameSettings input {
        width: 80%;

        height: 2vh;
        font-size: 2vh;
        border-radius: 4vh;
        border: none;
        margin-left: 10%;
      }

      #nicknameSettings label {
        font-size: 2vh;
      }

      #visibilitySettings {
        border: 0.1vh solid black;
        display: flex;
        width: 80%;
        height: 4vh;
        margin-top: 3vh;
        margin-left: 10%;
        margin-right: 10%;

        box-sizing: border-box;
        text-align: left;
        justify-content: left;
        padding-top: 2%;
      }

      #visibilitySettings label {
        font-size: 2vh;
      }

      #visibilitySettings select {
        width: 80%;
        margin-top: -1.5%;
        height: 3vh;
        font-size: 2vh;
        border-radius: 10vh;
        border: none;
        margin-left: 10%;
        background-color: rgba(0, 255, 0, 0.219);
      }

      #changeAvatarBtn {
        width: 80%;
        margin-top: -1.5%;
        height: 3vh;
        font-size: 1.8vh;
        border-radius: 10vh;
        border: 0.1vh solid black;
        margin-left: 10%;
        background-color: rgb(192, 228, 172);
        color: rgb(0, 0, 0);
        font-weight: bold;
        cursor: pointer;
      }

      #save {
        border: 0.1vh solid black;
        display: flex;
        width: 90%;
        height: 7vh;
        background-color: rgb(78, 241, 78);
        margin-top: 3vh;
        margin-left: 5%;
        text-align: center;
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
        cursor: pointer;
        padding-top: 2%;
        font-size: 4vh;
        border-radius: 8vh;
      }

      #changeAvatar {
        display: none;
      }
      #changeBg {
        display: none;
      }
    </style>

    <div class="userPanel" id="userPanel">
      <img src="../icons/githubIcon.png" alt="user img" class="pfp" id="pfp" />
      <div class="userInfo" id="userInfo">
        <h1 class="name" id="yourNick">Zantar</h1>
        <p class="status" id="yourStatus">online</p>
      </div>
      <img
        src="../icons/settingsIcon.png"
        alt="settings Icon"
        id="settingsIcon"
        class="settings"
        onClick="userPanelSettings()"
      />
      <img
        src="../icons/eyeIconNO.png"
        alt="hide icon"
        class="settings"
        id="hideIcon"
      />
    </div>

    <!-- USER SETTINGS -->

    <div id="userSettingsDiv">
      <header class="background" id="background">
        <input type="file" id="changeBg" accept="image/*" />
        <img src="../mathbrainscreen.jpg" alt="" id="backgroundImg" />
      </header>

      <div id="pfpSettings" class="pfpSettings">
        <img src="../icons/githubIcon.png" alt="" />
      </div>

      <div id="userNickname">
        <h2 id="yourNickname">Zantar</h2>
        <p id="yourID">Zantar#1</p>
      </div>

      <div id="nicknameSettings">
        <label for="changeNickname">Nickname: </label>
        <input type="text" id="changeNickname" value="Zantar" />
      </div>

      <div id="visibilitySettings">
        <label for="visibility">Visibility: </label>
        <select name="visibility" id="visibility">
          <option style="background-color: green" value="online">online</option>
          <option style="background-color: red" value="dnd">
            do not disturb
          </option>
          <option style="background-color: gray" value="offline">
            offline
          </option>
        </select>
      </div>

      <div id="visibilitySettings">
        <label for="changePFP">Avatar: </label>
        <input type="file" id="changeAvatar" accept="image/*" /><button
          id="changeAvatarBtn"
        >
          Change Avatar
        </button>
      </div>

      <button id="save" class="save">SAVE</button>
    </div>

    <script>
      const hideIcon = document.getElementById("hideIcon");
      const userPanel = document.getElementById("userPanel");
      const pfp = document.getElementById("pfp");
      const settingsIcon = document.getElementById("settingsIcon");
      const userInfo = document.getElementById("userInfo");
      const userSettingsDiv = document.getElementById("userSettingsDiv");
      const saveButton = document.getElementById("save");
      const yourStatus = document.getElementById("yourStatus");
      const changeAvatarBtn = document.getElementById("changeAvatarBtn");
      const changeAvatar = document.getElementById("changeAvatar");

      const backgroundImg = document.getElementById("backgroundImg");
      const changeBg = document.getElementById("changeBg");

      if (getComputedStyle(pfp).display == "none") {
        userPanel.style.width = "7vh";
        pfp.style.display = "none";
        settingsIcon.style.display = "none";
        userInfo.style.display = "none";
        hideIcon.src = "../icons/eyeIcon.png";
        hideIcon.style.margin = "10%";
      }

      hideIcon.addEventListener("click", (e) => {
        if (pfp.style.display !== "none") {
          userPanel.style.width = "7vh";
          pfp.style.display = "none";
          settingsIcon.style.display = "none";
          userInfo.style.display = "none";
          hideIcon.src = "../icons/eyeIcon.png";
          hideIcon.style.margin = "10%";
        } else {
          userPanel.style.width = "auto";
          pfp.style.display = "block";
          settingsIcon.style.display = "block";
          userInfo.style.display = "flex";
          hideIcon.src = "../icons/eyeIconNO.png";
          hideIcon.style.marginLeft = "0px";
          hideIcon.style.marginRight = "20px";
        }
      });

      function userPanelSettings() {
        if (userSettingsDiv.style.display === "block") {
          userSettingsDiv.style.display = "none";
        } else {
          userSettingsDiv.style.display = "block";
        }
      }

      let newAvatar = null;
      changeAvatarBtn.addEventListener("click", (e) => {
        changeAvatar.style.display = "block";

        setTimeout(() => {
          changeAvatar.click();
          changeAvatar.style.display = "none";
        }, 100);

        changeAvatar.onchange = (e) => {
          const file = e.target.files[0];

          const reader = new FileReader();
          reader.onload = function (event) {
            newAvatar = event.target.result;

            document.querySelector("#pfpSettings img").src = newAvatar;
          };

          reader.readAsDataURL(file);
        };
      });

      document.getElementById("changeNickname").onchange = (e) => {
        document.getElementById("yourNickname").textContent =
          document.getElementById("changeNickname").value;

        document.getElementById("yourID").textContent =
          document.getElementById("changeNickname").value + "#1";
      };

      backgroundImg.addEventListener("click", (e) => {
        changeBg.style.display = "block";
        setTimeout(() => {
          changeBg.click();
          changeBg.style.display = "none";
        }, 10);

        changeBg.onchange = (e) => {
          const file = e.target.files[0];

          const reader = new FileReader();
          reader.onload = function (event) {
            let newBg = event.target.result;
            backgroundImg.src = newBg;
          };
          reader.readAsDataURL(file);
        };
      });

      saveButton.addEventListener("click", (e) => {
        const newName = document.getElementById("changeNickname").value;
        let newVisibility = document.getElementById("visibility").value;

        document.getElementById("yourNick").textContent = newName;
        document.getElementById("yourNickname").textContent = newName;
        document.getElementById("yourID").textContent = newName + "#1";

        if (newVisibility == "online") {
          yourStatus.style.color = "rgb(109, 170, 109)";
        }
        if (newVisibility == "dnd") {
          yourStatus.style.color = "red";
          newVisibility = "do not disturb";
        }
        if (newVisibility == "offline") {
          yourStatus.style.color = "#B2B2B2";
        }

        document.getElementById("yourStatus").textContent = newVisibility;
        if (newAvatar !== null) {
          document.getElementById("pfp").src = newAvatar;
        }

        userSettingsDiv.style.display = "none";
      });
    </script>

    <div class="container">
      <style>
        .leftMenu {
          width: 11vh;
          height: 100vh;
          min-width: 7vh;
          background-color: rgb(256, 236, 212);
          overflow: auto;
          border-radius: 10px;
        }

        .leftMenuList {
          text-align: center;
          padding: 0;
          list-style: none;
        }

        .leftMenuList li {
          margin-top: 10px;
          border-radius: 20%;
        }

        .leftMenuList li:hover {
          background-color: gray;
          transition: all 1s;
        }

        .leftMenuList .none:hover {
          width: 100%;
          background-color: white;
        }

        .leftMenuList img {
          width: 80%;
          max-width: 80px;
        }
      </style>

      <aside class="leftMenu">
        <ul class="leftMenuList">
          <li>
            <img src="../icons/chatIcon.png" alt="chat Icon" />
          </li>
          <li>
            <img src="../icons/friendsIcon.png" alt="friend Icon" />
          </li>
          <li>
            <img src="../icons/notificationIcon.png" alt="notification Icon" />
          </li>
          <li>
            <img src="../icons/homeIcon.png" alt="home Icon" />
          </li>
          <li>
            <img src="../icons/settingsIcon.png" alt="home Icon" />
          </li>

          <li class="none">
            <img src="../icons/none.png" alt="" />
            <img src="../icons/none.png" alt="" />
            <img src="../icons/none.png" alt="" />
            <img src="../icons/none.png" alt="" />
            <img src="../icons/none.png" alt="" />
          </li>

          <li>
            <img src="../icons/githubIcon.png" alt="github icon" />
          </li>
          <li>
            <img src="../icons/logoutIcon.png" alt="logout icon" />
          </li>
          <li>
            <img
              src="../icons/userSettingsIcon.png"
              alt="user settings icon"
              onClick="userPanelSettings()"
            />
          </li>
        </ul>
      </aside>

      <section class="chatsContainer">
        <div class="chatsTop">
          <h1>Chats</h1>
          <input
            type="text"
            name="searchFriends"
            id="searchFriends"
            class="searchFriends"
            placeholder="search friends"
          />
        </div>

        <div class="chatsFriends">
          <ul class="friendList">
            <li id="zaznaczony">
              <img src="../icons/githubIcon.png" alt="pfp" />
              <div class="friendInfo">
                <h1 class="friendName">S38AI</h1>
                <p class="friendMsg">you are the best programmer man! 3m</p>
              </div>
            </li>

            <li>
              <img src="../icons/githubIcon.png" alt="pfp" />
              <div class="friendInfo">
                <h1 class="friendName">Elon Musk</h1>
                <p class="friendMsg">I hate joe biden 10m</p>
              </div>
            </li>
          </ul>
        </div>
      </section>
      <!-- chat -->
      <main class="chat">
        <header class="chatHeader">
          <img src="../icons/githubIcon.png" alt="pfp" />
          <div class="chatHeaderInfo">
            <h1 class="nameFriendHeader">S38AI</h1>
            <p class="statusFriendHeader">online now</p>
          </div>

          <img
            src="../icons/phoneIcon.png"
            alt="phone icon"
            class="phoneIcon"
          />
          <img
            src="../icons/settings.png"
            alt="settings icon"
            class="settings"
          />
        </header>

        <section class="messages" id="messages">
          <div id="yourMessage" class="yourMessage">
            <p class="yourMessageText">Hello my friend</p>
          </div>

          <div id="friendMessage" class="friendMessage">
            <img src="../icons/githubIcon.png" alt="" class="pfp" />
            <p class="friendMessageText">you are the best programmer man!</p>
          </div>

          <div id="yourMessage" class="yourMessage">
            <p class="yourMessageText">I know! What are you doing today</p>
          </div>

          <div id="friendMessage" class="friendMessage">
            <img src="../icons/githubIcon.png" alt="" class="pfp" />
            <p class="friendMessageText">
              i am playing my favourite game! Math brain!
            </p>
          </div>
        </section>

        <footer class="chatInput">
          <input
            type="file"
            name="photoInput"
            id="photoInput"
            accept="image/*"
          /><img
            src="../icons/fileIcon.png"
            alt="upload a file!"
            id="photoUpload"
          />
          <input type="file" accept=".gif,image/gif" id="gifInput" /><img
            src="../icons/gifIcon.png"
            alt="upload a gif!"
            id="gifUpload"
          />
          <img
            src="../icons/randomIcon.png"
            alt="random subject"
            id="randomSubject"
          />
          <input
            type="text"
            name="inputChat"
            id="inputChat"
            placeholder="send a message!"
          />
          <p class="fastEmoji" id="fastEmoji" style="cursor: pointer">ðŸ˜Ž</p>
        </footer>
      </main>
    </div>

    <script src="talkingScript.js"></script>
  </body>
</html>
